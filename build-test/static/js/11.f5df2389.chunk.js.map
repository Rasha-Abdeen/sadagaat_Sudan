{"version":3,"sources":["components/base_hubs/hub_subHubs.js","components/base_hubs/Feeding.js"],"names":["Hub_Subhubs","props","useState","subhub","setSubhubs","offset","setOffset","setCurrentPage","postsPerPage","hubId","t","useTranslation","a","window","fetch","address","headers","i18n","language","fetcher","json","response","filteredSubhubs","filter","useEffect","SubHubs","currentPosts","slice","className","class","name","map","sub_hub","key","id","style","height","to","src","alt","length","position","bottom","previousLabel","nextLabel","breakLabel","breakClassName","pageCount","Math","ceil","marginPagesDisplayed","pageRangeDisplayed","onPageChange","e","selected","containerClassName","subContainerClassName","activeClassName","Feeding","changeActiveTab1","setState","activeTab1","activeTab2","changeActiveTab2","getFileName","state","files","fileType","fileName","type","search","fileIcon","console","log","openFile","url","then","res","blob","outside","URL","createObjectURL","file","open","hub","this","hubFiles","tabs_class","dir","btnDir","Fragment","coverImage","href","data-toggle","onClick","mxaHeight","width","description","undefined","index","trigger","displayName","closeOnDocumentClick","target","download","Component","withTranslation"],"mappings":"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","file":"static/js/11.f5df2389.chunk.js","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport address from './../utils/address';\r\nimport{Link} from 'react-router-dom'\r\nimport 'react-circular-progressbar/dist/styles.css';\r\nimport i18n from 'i18next'\r\nimport { useTranslation } from 'react-i18next';\r\nimport ReactPaginate from 'react-paginate'\r\n\r\n/**\r\n * This component showing all Sub Hubs related to specific hub\r\n * @component\r\n * @param {object} props  props recived from specific hub \r\n *  @example @see http://sadagaat-uk.org/water\r\n */\r\n\r\nconst Hub_Subhubs = (props)=>{\r\n\r\n  const [subhub, setSubhubs] = useState([])\r\n  const [offset ,setOffset]= useState(0)\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  // how meny subhubs dispaly per page \r\n  const [postsPerPage] = useState(6);\r\n  const hubId = props.hubId\r\n  const {t} = useTranslation()\r\n\r\n /**  useEffect call SubHubs() function when component mounted or  when recived props \r\n*/\r\n  useEffect(() => {\r\n    \r\n    SubHubs()\r\n \r\n      } , [props])\r\n\r\n\r\n      \r\n/**\r\n     * This function return All SubHubs returned by the API \r\n     * @return {Array} array  of subhubs returned by the API\r\n*/\r\n       async function SubHubs() {\r\n         const fetcher = await window.fetch(`${address()}subHubs`,{headers: {'accept-language': `${i18n.language}`}})\r\n         const response = await fetcher.json()\r\n         /**\r\n          * const filteredSubhubs = array  of  all sub hubs with specific hub\r\n          * its filter the subhubs returned from an APIS when subhub.hubId === hubId\r\n          */\r\n         const filteredSubhubs = response.filter((subhub) => subhub.hubId === hubId)\r\n         setSubhubs(filteredSubhubs)\r\n       }\r\n\r\n  // Get current subhubs  for pagination module\r\nconst currentPosts = subhub.slice(offset , offset + postsPerPage);\r\n\r\n// Change page paginate change current page of pagenation  and change the value of offset\r\nconst paginate = (e) => {\r\n  setCurrentPage(e.selected)\r\n  setOffset(e.selected * postsPerPage)\r\n}\r\n\r\nreturn(\r\n<div>\r\n      \r\n        <div className=\"row multi-row-clearfix\">\r\n          <div className=\"blog-posts\">\r\n          <h3 class=\"mt-10 line-bottom\">{props.name}</h3>\r\n          <br/>\r\n\r\n\r\n  {currentPosts.map(sub_hub => ( \r\n\r\n            <div className=\"col-md-4\" key ={sub_hub.id}>\r\n              <div class=\"causes bg-white mb-30\" style = {{height:'400px'}}>\r\n              <Link to={'/single-subhub/'+sub_hub.id}>\r\n                <div class=\"thumb\">\r\n\r\n                  \r\n                      <img src={`${address()}subHubs/${sub_hub.id}/image`}\r\n                      alt \r\n                      className=\"img-fullwidth\"\r\n                      height=\"250px\"\r\n                        />\r\n                            \r\n                </div>\r\n                <div class=\"causes-details clearfix border-bottom p-15 pt-15 pb-15\">\r\n\r\n                  <h4 class=\"text-uppercase\">\r\n                    {sub_hub.name}\r\n                   \r\n                  </h4>\r\n                  \r\n                <Link to={'/sub_hubs/'+sub_hub.id}\r\n                className=\"btn btn-default btn-theme-colored btn-xs font-16 mt-10\">\r\n                  {t('Donate')}\r\n                </Link>\r\n              </div>\r\n              </Link>\r\n            </div>\r\n\r\n            </div>\r\n            ))}\r\n\r\n           \r\n     \r\n     \r\n</div>\r\n{/* // pagination doesnt appear untile the subhubs length being more than 6  postPerPage */}\r\n{subhub.length > postsPerPage &&(\r\n      <div style = {{position:'absolute',bottom:'0%'}}>\r\n\r\n    <ReactPaginate\r\n                        previousLabel={t('prev')}\r\n                        nextLabel={t('next')}\r\n                        breakLabel={\"...\"}\r\n                        breakClassName={\"break-me\"}\r\n                        pageCount={Math.ceil(subhub.length / postsPerPage)}\r\n                        marginPagesDisplayed={2}\r\n                        pageRangeDisplayed={5}\r\n                        onPageChange={paginate}\r\n                        containerClassName={\"pagination\"}\r\n                        subContainerClassName={\"pages pagination\"}\r\n                        activeClassName={\"active\"}/>\r\n            </div>\r\n      )}\r\n          </div>\r\n     \r\n      </div>\r\n\r\n);\r\n\r\n}\r\nexport default Hub_Subhubs;","import React, { Component } from \"react\";\r\nimport address from \"../utils/address\";\r\nimport Header from \"../sub_page_header\";\r\nimport { Link } from \"react-router-dom\";\r\nimport i18n from \"i18next\";\r\nimport Hub_Subhubs from \"./hub_subHubs\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport Popup from \"reactjs-popup\";\r\n\r\n/**\r\n * This comoponent display subHub information  and Project related to this subhub\r\n * @component\r\n * @see http://sadagaat-uk.org/single-subhub/1849\r\n */\r\n\r\nclass Feeding extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      hub: [],\r\n      files: [],\r\n      offset: 0,\r\n      activeTab1: \"active\",\r\n      activeTab2: \"\",\r\n    };\r\n  }\r\n  /**\r\n   * Get shub information from APIs\r\n   * Get Projects that related to specific subhub\r\n   */\r\n\r\n  async componentDidMount() {\r\n    console.log(this.props);\r\n    //  Get id of subhub from url\r\n    const fetcher = await window.fetch(`${address()}hubs/1744`, {\r\n      headers: { \"accept-language\": `${i18n.language}` },\r\n    });\r\n    const response = await fetcher.json();\r\n    this.setState({ hub: response, files: response.files });\r\n  }\r\n\r\n  async componentWillReceiveProps() {\r\n    const fetcher = await window.fetch(`${address()}hubs/1744`, {\r\n      headers: { \"accept-language\": `${i18n.language}` },\r\n    });\r\n    const response = await fetcher.json();\r\n    this.setState({ hub: response, files: response.files });\r\n  }\r\n\r\n  changeActiveTab1 = () => {\r\n    this.setState({ activeTab1: \"active\", activeTab2: \"\" });\r\n  };\r\n\r\n  changeActiveTab2 = () => {\r\n    this.setState({ activeTab1: \"\", activeTab2: \"active\" });\r\n  };\r\n\r\n  getFileName = () => {\r\n    return this.state.files[0].name;\r\n  };\r\n\r\n  fileType = () => {\r\n    let fileName = this.state.files[0].name;\r\n    let type = \"\";\r\n    if (fileName.search(\".pdf\") > 0) {\r\n      type = \"pdf\";\r\n    } else if (fileName.search(\".xlsx\") > 0) {\r\n      type = \"xlsx\";\r\n    } else if (fileName.search(\".docs\") > 0) {\r\n      type = \"docx\";\r\n    }\r\n    return type;\r\n  };\r\n\r\n  fileIcon = () => {\r\n    let fileType = this.fileType();\r\n    console.log(fileType);\r\n    switch (fileType) {\r\n      case \"pdf\":\r\n        return <i class=\"fa fa-file-pdf-o\"></i>;\r\n      case \"xlsx\":\r\n        return <i class=\"fa fa-file-excel-o\"></i>;\r\n      case \"docx\":\r\n        return <i class=\"fa fa-file-word-o\"></i>;\r\n    }\r\n  };\r\n\r\n  openFile = () => {\r\n    let url = address() + \"hub/document/\" + this.getFileName();\r\n    fetch(url)\r\n      .then((res) => res.blob())\r\n      .then((blob) => {\r\n        var outside = URL.createObjectURL(blob);\r\n        this.setState({ file: outside });\r\n        window.open(this.state.file);\r\n      });\r\n  };\r\n\r\n  render() {\r\n    let hubFiles = this.state.files;\r\n    const { t } = this.props;\r\n    const { hub } = this.state;\r\n    const tabs_class = i18n.dir() === \"rtl\" ? \"float-right\" : \"float-left\";\r\n    const popupDir = i18n.dir() === \"rtl\" ? \"float-right\" : \"float-left\";\r\n    const btnDir = i18n.dir() === \"rtl\" ? \"mr-5\" : \"ml-5\";\r\n    return (\r\n      <React.Fragment>\r\n        <section>\r\n          <Header name={t(\"Feeding\")} coverImage={\"feeding-bg-img\"} />\r\n          <div className=\"container\">\r\n            <div className=\"row multi-row-clearfix\">\r\n              <div>\r\n                <div className=\"col-xs-12 col-md-12\">\r\n                  <h2 class=\"line-bottom mt-0\">{hub.name}</h2>\r\n                  <ul className=\"nav nav-tabs\">\r\n                    <li className={this.state.activeTab1 + \" \" + tabs_class}>\r\n                      <a\r\n                        href=\"#login-tab\"\r\n                        data-toggle=\"tab\"\r\n                        id=\"login\"\r\n                        onClick={this.changeActiveTab1}\r\n                      >\r\n                        {t(\"Sector Details\")}\r\n                      </a>\r\n                    </li>\r\n                    <li className={this.state.activeTab2 + \" \" + tabs_class}>\r\n                      <a\r\n                        href=\"#register-tab\"\r\n                        data-toggle=\"tab\"\r\n                        onClick={this.changeActiveTab2}\r\n                      >\r\n                        {t(\"Sector File\")}\r\n                      </a>\r\n                    </li>\r\n                  </ul>\r\n                  <div className=\"tab-content\">\r\n                    <div\r\n                      className=\"tab-pane fade in active p-15\"\r\n                      id=\"login-tab\"\r\n                    >\r\n                      <div className=\"event media sm-maxwidth400 border-bottom mt-5 mb-5 pt-10 pb-15\">\r\n                        <div className=\"row\">\r\n                          <div className=\"causes\">\r\n                            <div className=\"row-fluid\">\r\n                              <div className=\"col-md-6\">\r\n                                <div\r\n                                  className=\"post-thumb thumb\"\r\n                                  style={{ mxaHeight: \"600px\" }}\r\n                                >\r\n                                  <img\r\n                                    className=\"img-responsive\"\r\n                                    src={`${address()}hubs/${hub.id}/image`}\r\n                                    alt=\"Feeding Sector\"\r\n                                    style={{ height: \"400px\", width: \"500px\" }}\r\n                                  />\r\n                                </div>\r\n                              </div>\r\n                              <div class=\"causes-details col-md-6\">\r\n                                <p>{hub.description}</p>\r\n                                <div class=\"mt-10 mb-20\">\r\n                                  <ul class=\"list-inline clearfix mt-10\">\r\n                                    <li class=\"text-theme-colored pull-right flip pr-0\"></li>\r\n                                  </ul>\r\n                                </div>\r\n                                <Link\r\n                                  to={\"/hub/\" + hub.id}\r\n                                  class=\"btn btn-theme-colored btn-sm\"\r\n                                >\r\n                                  {t(\"Donate Now\")}\r\n                                </Link>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <Hub_Subhubs\r\n                        hubId={hub.id}\r\n                        name={t(\"Feeding Sub Sectors\")}\r\n                      />\r\n                    </div>\r\n                    <div className=\"tab-pane fade in p-15\" id=\"register-tab\">\r\n                      {/* <p>{t(\"Files\")}</p> */}\r\n                      {hubFiles !== undefined && hubFiles.length > 0 ? (\r\n                        hubFiles.map((file, index) => (\r\n                          <div>\r\n                            {this.fileType() === \"pdf\" ? (\r\n                              <Popup\r\n                                trigger={(open) => (\r\n                                  <a className=\"popupCustom-btn\">\r\n                                    {this.fileIcon()} {file.displayName}\r\n                                  </a>\r\n                                )}\r\n                                position=\"bottom center\"\r\n                                closeOnDocumentClick\r\n                              >\r\n                                <div>\r\n                                  <h6>\r\n                                    {this.fileIcon()} {file.displayName}\r\n                                  </h6>\r\n                                  <a\r\n                                    href={`${address()}hub/document/${this.getFileName()}`}\r\n                                    className=\"btn btn-flat btn-theme-colored btn-sm\"\r\n                                    target=\"_slef\"\r\n                                    download=\"pdf\"\r\n                                  >\r\n                                    {t(\"Save\")}\r\n                                  </a>\r\n                                  <a\r\n                                    onClick={this.openFile}\r\n                                    className={\r\n                                      \"btn btn-flat btn-theme-colored btn-sm \" +\r\n                                      btnDir\r\n                                    }\r\n                                  >\r\n                                    {t(\"Open\")}\r\n                                  </a>\r\n                                </div>\r\n                              </Popup>\r\n                            ) : (\r\n                              <a\r\n                                href={`${address()}hub/document/${this.getFileName()}`}\r\n                              >\r\n                                {this.fileIcon()} {file.displayName}\r\n                              </a>\r\n                            )}\r\n                          </div>\r\n                        ))\r\n                      ) : (\r\n                        <p>{t(\"No Files Available\")}</p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\nexport default withTranslation()(Feeding);\r\n"],"sourceRoot":""}